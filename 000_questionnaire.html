<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="cs" lang="cs">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=windows-1250" />
	<meta http-equiv="X-UA-Compatible" content="chrome=1,IE=edge" />
		<script src="scripts/tasks_order.js"></script>
</head>
	<body style="font-family: Arial, serif; padding-top: 10px; padding-right: 20px; padding-bottom: 10px; padding-left: 20px;" onload="generateId();">
	<script src="scripts/jquery-1.11.2.js"></script>
	<script src="scripts/save_to_existing_csv.js"></script>
	<script src="scripts/detect_keys.js"></script>
	<script>
	var form_data  = [];
	var d  = [];
	var file_name1 = 'personal_char_01.csv';
	var file_name2 = 'task_all_' + userId + '.csv';
	
	function testData(){
		var intform1 = document.getElementsByName("sex");
		var check1 = 0;
		for(i=0;i<intform1.length;i++){
			if(intform1[i].checked){
				check1++;
			break;
			}
		}
		var intform2 = document.getElementsByName("education");
		var check2 = 0;
		for(i=0;i<intform2.length;i++){
			if(intform2[i].checked){
				check2++;
				break;
			}
		}
		
		var intform3 = document.getElementsByName("handedness");
		var check3 = 0;
		for(i=0;i<intform3.length;i++){
			if(intform3[i].checked){
				check3++;
				break;
			}
		}

		var check4;
		if (document.getElementById("age").value == "") {
			check4 = 0;
		}
		else {
			check4 = 1;
		}

		if (check1 && check2 && check3 && check4) {
			document.getElementById("fillAll").innerHTML = " ";
			readData();
		}
		else {
			document.getElementById("fillAll").innerHTML = "&nbsp; &nbsp; Please answer all mandatory questions (marked with red asterisk).";
		}
	}
	
	function readData() {
	
	var datum = new Date();
	var y = datum.getFullYear();
	var o = datum.getMonth();
	var d = datum.getDay();
	var h = datum.getHours(); 
	var m = datum.getMinutes();
	var s = datum.getSeconds();
	
	form_data.push(y+"-"+o+"-"+d+"-"+h+":"+m+":"+s);

	form_data.push(random_code);
	form_data.push(test_variant);
	
	form_data.push(task_order);
	form_data.push(history.length);

	form_data.push(document.getElementById("age").value);
	form_data.push($('input:radio[name=sex]:checked').val());
	form_data.push($('input:radio[name=education]:checked').val());
	form_data.push($('input:radio[name=handedness]:checked').val());
	form_data.push(document.getElementById("eye_defect").value);

	var w = window.innerWidth
	|| document.documentElement.clientWidth
	|| document.body.clientWidth;

	var h = window.innerHeight
	|| document.documentElement.clientHeight
	|| document.body.clientHeight;
	
	form_data.push(w);
	form_data.push(h);
	
	form_data.push(screen.width);
	form_data.push(screen.height);
	form_data.push(screen.colorDepth);
	
	form_data.push(navigator.platform);
	form_data.push(navigator.appCodeName+" "+navigator.appVersion);
	form_data.push(navigator.language);
	
	var browserInfo = navigator.userAgent;
	browserInfo = browserInfo.replace(/;/g, '');
	browserInfo = browserInfo.replace(/,/g, '');
	form_data.push(browserInfo);
	
	form_data = form_data.toString();
	form_data = form_data.replace(/,/g, ';');

	saveDataToExistingFile(file_name1, form_data);
	saveDataToExistingFile(file_name2, d);
	
	openNextSlide();
	
	}

	function openNextSlide () {
		window.open("001_instructions.html?userId=" + random_code, "_self");
	}
</script>
		<br/>
			<div style="border-width: 1px; border-style: solid; border-color: #666666; padding: 10px">
			<b>Personal characteristics</b>
			<br/><br/>
			<i>Year of birth:  </i><input id="age" type="number" name="age" min="1900" max="2022" style="width: 100px;"> <span style="color: #ff0000; font-weight: bold;">*</span><br/>
			<br/><br/>
			<i>Gender: <span style="color: #ff0000; font-weight: bold;">*</span></i><br/>
			<table>
			<tr>				
				<td style="width: 50px; text-align: center;"><input type="radio" name="sex" value="woman"></td>
				<td style="width: 50px; text-align: center;"><input type="radio" name="sex" value="man"></td>
				<td style="width: 100px; text-align: center;"><input type="radio" name="sex" value="x"></td>
			</tr>
			<tr>
				<td style="width: 50px; text-align: center;">woman</td>
				<td style="width: 50px; text-align: center;">man</td>
				<td style="width: 100px; text-align: center;">I dont't want to state</td>
			</tr>
			</table>				
			<br/><br/>
			<i>Reached education level:<span style="color: #ff0000; font-weight: bold;">*</span></i><br/>
			<table>
			<tr>				
				<td style="width: 50px; text-align: center;"><input type="radio" name="education" value="primary education"/></td>
				<td style="width: 50px; text-align: center;"><input type="radio" name="education" value="secondary education"/></td>
				<td style="width: 50px; text-align: center;"><input type="radio" name="education" value="Bc."/></td>
				<td style="width: 50px; text-align: center;"><input type="radio" name="education" value="Mgr."/></td>
				<td style="width: 50px; text-align: center;"><input type="radio" name="education" value="PhD."/></td>
			</tr>
			<tr>
				<td style="width: 50px; text-align: center;">Primary education</td>
				<td style="width: 50px; text-align: center;">Secondary education</td>
				<td style="width: 50px; text-align: center;">Bachelor's</td>
				<td style="width: 50px; text-align: center;">Masters's</td>
				<td style="width: 50px; text-align: center;">Doctorate or higher</td>
			</tr>
			</table>				
			<br/><br/><br/>
			<i>Dominant hand:  <span style="color: #ff0000; font-weight: bold;">*</span></i><br/>
			<table>
			<tr>			
				<td style="width: 125px; text-align: center;"><input type="radio" name="handedness" value="right"/></td>
				<td style="width: 125px; text-align: center;"><input type="radio" name="handedness" value="left"/></td>
				<td style="width: 125px; text-align: center;"><input type="radio" name="handedness" value="x"/></td>
			</tr>
			<tr>
				<td style="width: 125px; text-align: center;">right</td>
				<td style="width: 125px; text-align: center;">left</td>
				<td style="width: 125px; text-align: center;">none</td>
			</tr>
			</table>				
			<br/><br/>
			<br/><br/><br/>
			<i>Please indicate if you have any eye defects: </i><textarea rows="6" cols="48" id="eye_defect" type="text" name="eye_defect" value=" "></textarea><br/>
			<br/><br/>
			</div><br/>
			<input type="button" id="storeData" value="Save and continue" style="height: 30px; width: 180px; font: normal normal 12px Arial;" onclick="testData();"/><span style="color: red;" id="fillAll"></span>
		</form>	
		<br/>
	</body>
</html>