<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="cs" lang="cs">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=windows-1250" />
	<meta http-equiv="X-UA-Compatible" content="chrome=1,IE=edge" />
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
	<link rel="stylesheet" href="forms-styling.css">
</head>
	<body>
	<script src="scripts/jquery-1.11.2.js"></script>
	<script src="scripts/save_to_existing_csv.js"></script>
	<script src="scripts/detect_keys.js"></script>
	<script type="text/javascript">
	var form_data  = [];
	var d  = [];
	function getParameterByName(name) {
		var match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
		return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
	}
    var taskOr = getParameterByName('taskOr');
	var taskCount = getParameterByName('taskCount');
	var userId = getParameterByName('userId');
	
	var file_name1 = 'post_eval_02.csv';
	var file_name2 = 'task_all_' + userId + '.csv';
	
	function testData (){
		var intform1 = document.getElementsByName("stress");
		var check1 = 0;
		for(i=0;i<intform1.length;i++){
			if(intform1[i].checked){
				check1++;
				break;
			}
		}
		var intform2 = document.getElementsByName("decision_width");
		var check2 = 0;
		for(i=0;i<intform2.length;i++){
			if(intform2[i].checked){
				check2++;
				break;
			}
		}
		
		var intform3 = document.getElementsByName("decision_length");
		var check3 = 0;
		for(i=0;i<intform3.length;i++){
			if(intform3[i].checked){
				check3++;
				break;
			}
		}

		var intform4 = document.getElementsByName("decision_stairs");
		var check4 = 0;
		for(i=0;i<intform4.length;i++){
			if(intform4[i].checked){
				check4++;
				break;
			}
		}

		var intform5 = document.getElementsByName("decision_random");
		var check5 = 0;
		for(i=0;i<intform5.length;i++){
			if(intform5[i].checked){
				check5++;
				break;
			}
		}

		if (check1 && check2 && check3 && check4 && check5) {
			document.getElementById("fillAll").innerHTML = " ";
			readData();
		}
		else {
			document.getElementById("fillAll").innerHTML = "&nbsp; &nbsp; Please answer all mandatory questions (marked with asterisk).";
		}
	}
	
	function readData() {
	
	var datum = new Date();
	var y = datum.getFullYear();
	var o = datum.getMonth();
	var d = datum.getDay();
	var h = datum.getHours(); 
	var m = datum.getMinutes();
	var s = datum.getSeconds();
	
	form_data.push(y+"-"+o+"-"+d+"-"+h+":"+m+":"+s);
	
	form_data.push(userId);
	form_data.push(testVa);
	
	form_data.push(taskOr);
	form_data.push(history.length);

	form_data.push($('input:radio[name=stress]:checked').val());
	form_data.push($('input:radio[name=decision_width]:checked').val());
	form_data.push($('input:radio[name=decision_length]:checked').val());
	form_data.push($('input:radio[name=decision_stairs]:checked').val());
	form_data.push($('input:radio[name=decision_random]:checked').val());

	form_data.push(document.getElementById("decision_text").value);
	form_data.push(document.getElementById("comments_text").value);
	
	var w = window.innerWidth
	|| document.documentElement.clientWidth
	|| document.body.clientWidth;

	var h = window.innerHeight
	|| document.documentElement.clientHeight
	|| document.body.clientHeight;
	
	form_data.push(w);
	form_data.push(h);

	form_data.push(screen.width);
	form_data.push(screen.height);
	form_data.push(screen.colorDepth);
	
	form_data.push(navigator.platform);
	form_data.push(navigator.appCodeName+" "+navigator.appVersion);
	form_data.push(navigator.language);
	
	var browserInfo = navigator.userAgent;
	browserInfo = browserInfo.replace(/;/g, '');
	browserInfo = browserInfo.replace(/,/g, '');
	form_data.push(browserInfo);
	
	form_data = form_data.toString();
	form_data = form_data.replace(/,/g, ';');

	saveDataToExistingFile(file_name1, form_data);
	saveDataToExistingFile(file_name2, d);
	
	openNextSlide();
	
	}
	
	function openNextSlide() {
		setTimeout(function() {
			window.open("011_end.html", "_self");
		}, 750);	
	}
</script>
<div class="container col-md-6 col-md-offset-3">
	<form class="form-horizontal">
	  <br>
	  <h1>Please fill in the following questions regarding evaluation of conducted test</h1>
	  <br>
	  <fieldset class="form-group">
			<legend class="col-form-label">When choosing the corridor, I felt under time pressure *</legend>
			<div class="form-check form-check-inline">
				<input type="radio" id="stress1" name="stress" class="form-check-input" value="1">
				<label class="form-check-label" for="stress1">strongly agree</label>
			</div>
			<div class="form-check form-check-inline">
				<input type="radio" id="stress2" name="stress" class="form-check-input"  value="2">
				<label class="form-check-label" for="stress2">agree</label>
			</div>
			<div class="form-check form-check-inline">
				<input type="radio" id="stress3" name="stress" class="form-check-input" value="3"> 
				<label class="form-check-label" for="stress3">neutral</label>
			</div>
			<div class="form-check form-check-inline">
				<input type="radio" id="stress4" name="stress" class="form-check-input" value="4">
				<label class="form-check-label" for="stress4">disagree</label>
			</div>
			<div class="form-check form-check-inline">
				<input type="radio" id="stress5" name="stress" class="form-check-input" value="5">
				<label class="form-check-label" for="stress5">strongly disagree</label>
			</div>
	  </fieldset>
	  <fieldset class="form-group">
			<legend class="col-form-label">When choosing the corridor, I often decided according to the width of the corridors *</legend>
			<div class="form-check form-check-inline">
				<input type="radio" id="decision_width1" name="decision_width" class="form-check-input" value="1">
				<label class="form-check-label" for="decision_width1">strongly agree</label>
			</div>
			<div class="form-check form-check-inline">
				<input type="radio" id="decision_width2" name="decision_width" class="form-check-input"  value="2">
				<label class="form-check-label" for="decision_width2">agree</label>
			</div>
			<div class="form-check form-check-inline">
				<input type="radio" id="decision_width3" name="decision_width" class="form-check-input" value="3"> 
				<label class="form-check-label" for="decision_width3">neutral</label>
			</div>
			<div class="form-check form-check-inline">
				<input type="radio" id="decision_width4" name="decision_width" class="form-check-input" value="4">
				<label class="form-check-label" for="decision_width4">disagree</label>
			</div>
			<div class="form-check form-check-inline">
				<input type="radio" id="decision_width5" name="decision_width" class="form-check-input" value="5">
				<label class="form-check-label" for="decision_width5">strongly disagree</label>
			</div>
  		</fieldset>
		<fieldset class="form-group">
			<legend class="col-form-label">When choosing the corridor, I often decided according to the length of the corridors *</legend>
			<div class="form-check form-check-inline">
				<input type="radio" id="decision_length1" name="decision_length" class="form-check-input" value="1">
				<label class="form-check-label" for="decision_length1">strongly agree</label>
			</div>
			<div class="form-check form-check-inline">
				<input type="radio" id="decision_length2" name="decision_length" class="form-check-input"  value="2">
				<label class="form-check-label" for="decision_length2">agree</label>
			</div>
			<div class="form-check form-check-inline">
				<input type="radio" id="decision_length3" name="decision_length" class="form-check-input" value="3"> 
				<label class="form-check-label" for="decision_length3">neutral</label>
			</div>
			<div class="form-check form-check-inline">
				<input type="radio" id="decision_length4" name="decision_length" class="form-check-input" value="4">
				<label class="form-check-label" for="decision_length4">disagree</label>
			</div>
			<div class="form-check form-check-inline">
				<input type="radio" id="decision_length5" name="decision_length" class="form-check-input" value="5">
				<label class="form-check-label" for="decision_length5">strongly disagree</label>
			</div>
  		</fieldset>
		<fieldset class="form-group">
			<legend class="col-form-label">When choosing the corridor, I often decided according to the presence of the staircase *</legend>
			<div class="form-check form-check-inline">
				<input type="radio" id="decision_stairs1" name="decision_stairs" class="form-check-input" value="1">
				<label class="form-check-label" for="decision_stairs1">strongly agree</label>
			</div>
			<div class="form-check form-check-inline">
				<input type="radio" id="decision_stairs2" name="decision_stairs" class="form-check-input"  value="2">
				<label class="form-check-label" for="decision_stairs2">agree</label>
			</div>
			<div class="form-check form-check-inline">
				<input type="radio" id="decision_stairs3" name="decision_stairs" class="form-check-input" value="3"> 
				<label class="form-check-label" for="decision_stairs3">neutral</label>
			</div>
			<div class="form-check form-check-inline">
				<input type="radio" id="decision_stairs4" name="decision_stairs" class="form-check-input" value="4">
				<label class="form-check-label" for="decision_stairs4">disagree</label>
			</div>
			<div class="form-check form-check-inline">
				<input type="radio" id="decision_stairs5" name="decision_stairs" class="form-check-input" value="5">
				<label class="form-check-label" for="decision_stairs5">strongly disagree</label>
			</div>
  		</fieldset>
		  <fieldset class="form-group">
			<legend class="col-form-label">When choosing the corridor, I often decided randomly *</legend>
			<div class="form-check form-check-inline">
				<input type="radio" id="decision_random1" name="decision_random" class="form-check-input" value="1">
				<label class="form-check-label" for="decision_random1">strongly agree</label>
			</div>
			<div class="form-check form-check-inline">
				<input type="radio" id="decision_random2" name="decision_random" class="form-check-input"  value="2">
				<label class="form-check-label" for="decision_random2">agree</label>
			</div>
			<div class="form-check form-check-inline">
				<input type="radio" id="decision_random3" name="decision_random" class="form-check-input" value="3"> 
				<label class="form-check-label" for="decision_random3">neutral</label>
			</div>
			<div class="form-check form-check-inline">
				<input type="radio" id="decision_random4" name="decision_random" class="form-check-input" value="4">
				<label class="form-check-label" for="decision_random4">disagree</label>
			</div>
			<div class="form-check form-check-inline">
				<input type="radio" id="decision_random5" name="decision_random" class="form-check-input" value="5">
				<label class="form-check-label" for="decision_random5">strongly disagree</label>
			</div>
  		</fieldset>
		<br>
		<div class="form-group">
			<label class="col-form-label" for="decision_text">Decision comments</label>
			<textarea class="form-control" id="decision_text" rows="4" placeholder="Please write anything that comes to mind about what you decided when choosing the corridor."></textarea>
		</div>
		<br>
		<div class="form-group">
			<label class="col-form-label" for="comments_text">Test comments</label>
			<textarea class="form-control" id="comments_text" rows="4" placeholder="If you want to comment on the test in any way, please write your note here."></textarea>
		</div>
		<br>
		<div class="text-center"><button type="button" class="btn btn-dark" id="storeData" onclick="testData();">Save and Continue</button><br><span style="color: red;" id="fillAll"></span></div>
		</form>	
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
	</body>
</html>